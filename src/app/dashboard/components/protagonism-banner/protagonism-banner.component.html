<div class="w-full mx-auto relative z-10">
  <div *ngIf="isLoading || !data" class="w-full h-[130px] rounded-[8px] border border-[#F3F4F6] bg-white flex animate-pulse overflow-hidden">
  </div>

  <ng-container *ngIf="!isLoading && data">
    <div class="flex flex-row w-full h-[130px] rounded-[8px] border border-[#F3F4F6] bg-white relative overflow-visible shadow-sm">
      <div
        class="w-[290px] h-full relative flex flex-col justify-center px-[24px] py-[24px] gap-[4px] rounded-l-[7px] overflow-visible flex-shrink-0"
        style="background: linear-gradient(269.73deg, #FFFFFF -59.8%, #2563EB 103.33%);"
      >
        <div class="flex flex-row items-center gap-[6px] h-[20px] relative z-20">
          <span class="font-medium text-[12px] leading-[16px] tracking-[-0.01em] text-white">
            {{ data.main.title }}
          </span>

          <div class="relative group flex items-center justify-center">
            <svg
              class="cursor-pointer opacity-80 group-hover:opacity-100 transition-opacity"
              width="20" height="20" viewBox="0 0 20 20" fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <circle cx="10" cy="10" r="8.33" fill="rgba(49, 52, 58, 0.24)"/>
              <path d="M10 10V13.33" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
              <path d="M10 6.66V6.67" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
            </svg>

            <div class="absolute bottom-[calc(100%+8px)] left-1/2 -translate-x-1/2 hidden group-hover:block z-[9999] w-max max-w-[280px]">
              <div class="bg-[#111827] text-white text-[12px] leading-[1.4] px-3 py-2 rounded-[6px] shadow-xl text-center relative">
                Percentual de ocorrências que apresentam as palavra-chaves no título.
                <div class="absolute top-full left-1/2 -translate-x-1/2 border-8 border-transparent border-t-[#111827]"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="flex flex-col justify-center items-start gap-[2px] h-[58px] relative z-10">
          <span class="font-semibold text-[30px] leading-[36px] tracking-[-0.024em] text-white">
            {{ data.main.value }}%
          </span>

          <div class="flex flex-row items-start gap-[24px] h-[20px]">
            <div class="flex flex-row items-center gap-[4px]">
              <span class="w-[6px] h-[6px] rounded-full bg-[#14B8A6]"></span>
              <span class="font-medium text-[12px] leading-[16px] tracking-[-0.01em] text-white">
                {{ data.main.positive }}% positivo
              </span>

              <div class="relative group flex items-center justify-center scale-75 origin-left">
                <svg class="cursor-pointer opacity-60 group-hover:opacity-100 transition-opacity" width="20" height="20" viewBox="0 0 20 20" fill="none">
                  <circle cx="10" cy="10" r="8.33" fill="rgba(49, 52, 58, 0.24)"/>
                  <path d="M10 10V13.33" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
                  <path d="M10 6.66V6.67" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                <div class="absolute bottom-[calc(100%+8px)] left-1/2 -translate-x-1/2 hidden group-hover:block z-[9999] w-max max-w-[250px]">
                  <div class="bg-[#111827] text-white text-[12px] px-3 py-2 rounded-[6px] shadow-xl text-center relative">
                    Percentual de ocorrências positivas que apresentam as palavra-chaves no título.
                    <div class="absolute top-full left-1/2 -translate-x-1/2 border-8 border-transparent border-t-[#111827]"></div>
                  </div>
                </div>
              </div>
            </div>

            <div class="flex flex-row items-center gap-[4px]">
              <span class="w-[6px] h-[6px] rounded-full bg-[#EF4444]"></span>
              <span class="font-medium text-[12px] leading-[16px] tracking-[-0.01em] text-white">
                {{ data.main.negative }}% negativo
              </span>

              <div class="relative group flex items-center justify-center scale-75 origin-left">
                <svg class="cursor-pointer opacity-60 group-hover:opacity-100 transition-opacity" width="20" height="20" viewBox="0 0 20 20" fill="none">
                  <circle cx="10" cy="10" r="8.33" fill="rgba(49, 52, 58, 0.24)"/>
                  <path d="M10 10V13.33" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
                  <path d="M10 6.66V6.67" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                <div class="absolute bottom-[calc(100%+8px)] left-1/2 -translate-x-1/2 hidden group-hover:block z-[9999] w-max max-w-[250px]">
                  <div class="bg-[#111827] text-white text-[12px] px-3 py-2 rounded-[6px] shadow-xl text-center relative">
                    Percentual de ocorrências negativas que apresentam as palavra-chaves no título.
                    <div class="absolute top-full left-1/2 -translate-x-1/2 border-8 border-transparent border-t-[#111827]"></div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>

      <!-- ✅ SCROLLER com DRAG -->
      <div
  #scrollContainer
  class="flex-1 flex flex-row items-center relative h-full pl-[32px] pr-[32px] rounded-r-[7px]
         overflow-x-scroll overflow-y-hidden select-none
         cursor-grab active:cursor-grabbing no-scrollbar"
  (mousedown)="startDragging($event)"
  (mousemove)="moveEvent($event)"
  (mouseup)="stopDragging()"
  (mouseleave)="stopDragging()"
>
        <div
          *ngFor="let person of data.people; let last = last"
          class="relative flex flex-col justify-center items-start gap-[4px] w-[188px] h-[74px] mr-[64px] flex-shrink-0"
        >
          <span class="font-medium text-[12px] text-[#6B7280]">{{ person.name }}</span>
          <span class="font-semibold text-[30px] text-[#1F2937]">{{ person.value }}%</span>
          <div class="flex flex-row items-start gap-[24px]">
            <div class="flex flex-row items-center gap-[2px]">
              <span class="w-[6px] h-[6px] rounded-full bg-[#14B8A6]"></span>
              <span class="font-medium text-[12px] text-[#6B7280]">{{ person.positive }}% positivo</span>
            </div>
            <div class="flex flex-row items-center gap-[2px]">
              <span class="w-[6px] h-[6px] rounded-full bg-[#EF4444]"></span>
              <span class="font-medium text-[12px] text-[#6B7280]">{{ person.negative }}% negativo</span>
            </div>
          </div>

          <div *ngIf="!last" class="absolute right-[-32px] top-0 h-[82px] border-r border-[#F3F4F6]"></div>
        </div>
      </div>
    </div>
  </ng-container>
</div>
