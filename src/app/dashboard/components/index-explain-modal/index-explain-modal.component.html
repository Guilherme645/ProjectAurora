<ng-container *ngIf="open">
  
  <div
    class="fixed inset-0 z-[9998] bg-[#111827]/40 backdrop-blur-sm transition-opacity"
    (click)="onClose()"
  ></div>

  <div class="fixed inset-0 z-[9999] flex items-center justify-center p-4">
    
    <div class="relative w-full max-w-[612px]">

      <app-botaox 
        class="absolute -top-3 right-[-58px] z-50"
        (onClose)="onClose()">
      </app-botaox>

      <div
        class="w-full bg-white rounded-[16px] shadow-2xl flex flex-col overflow-hidden"
        (click)="$event.stopPropagation()"
        role="dialog"
        aria-modal="true"
      >
        
        <div 
          class="w-full h-[280px] flex items-center justify-center relative transition-colors duration-300"
          [style.background]="headerBackground"
        >
          
          <div 
            class="w-[67px] h-[248px] rounded-[4px] flex flex-col justify-between py-6 items-center shadow-sm"
            [style.background]="barBackground"
          >
            <div *ngFor="let num of [1, 2, 3, 4, 5]" 
                 class="w-[49px] h-[23px] flex items-center justify-center text-[12px] font-medium rounded-[4px] transition-all duration-300"
                 [ngClass]="score === num 
                   ? 'bg-white/20 border-[0.6px] border-white/10 shadow-[inset_0px_4px_12px_rgba(255,255,255,0.25)] text-black font-bold' 
                   : 'text-black/60 font-medium'">
              {{ num }}
            </div>
          </div>
        </div>

        <div class="px-8 pt-6 pb-0">
          
          <p class="text-[14px] leading-[20px] text-[#4B5563] mb-4 font-inter">
            {{ description }}
          </p>

          <div class="bg-[#F9FAFB] border border-[#E5E7EB] rounded-[12px] p-4 mb-8">
            <span class="text-[12px] font-bold text-[#111827] block mb-1">CÃ¡lculo:</span>
            <p class="text-[12px] leading-[18px] text-[#4B5563] font-mono break-words">
              {{ formula }}
            </p>
          </div>

        </div>

        <div class="px-8 py-6 border-t border-[#E5E7EB] flex justify-end">
          <button
            type="button"
            class="bg-[#1F2937] hover:bg-[#111827] text-white text-[14px] font-semibold 
                   rounded-[8px] px-6 py-3 transition-colors shadow-sm"
            (click)="onClose()"
          >
            Ok, entendi
          </button>
        </div>

      </div> </div> </div>
</ng-container>