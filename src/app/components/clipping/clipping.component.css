/* ==========================================================================
   VARIÁVEIS (tema 100% amarelo)
   ========================================================================== */
:host {
  /* Timeline base */
  --brand-blue-border: #9CA3AF;
  --timeline-background: #F3F4F6;
  --timeline-handle-bg: #854D0E;      /* amarelo queimado */
  --timeline-playhead-color: #854D0E; /* amarelo queimado */

  /* Seleção */
  --selection-yellow: #FEF9C3;             /* amarelo claro */
  --selection-yellow-strong: #FDE047;      /* amarelo forte */
  --selection-yellow-burnt: #854D0E;       /* amarelo queimado (bordas) */

  /* Tooltip / textos */
  --timeline-tooltip-bg: #000000;
  --timeline-tooltip-text: #ffffff;
  --timeline-marker-text: #6B7280;
  --sel-played-border: #854D0E;

  /* Botões */
  --button-bg: #FFFFFF;
  --button-border: #E5E7EB;
  --button-text: #1F2937;
  --button-shadow: 0px 1px 2px rgba(0, 0, 0, 0.05);
  --background-color: #FAFBFC;

  /* Transcrição */
  --brand-blue-main: #EAB308;         /* amarelo 500 */
  --brand-blue-light-3: #FDE68A;      /* amarelo claro */
  --text-color-default: #1F2937;
  --text-color-muted: #6B7280;
  --transcription-played-bg: #FEF9C3;
  --transcription-playing-bg: #FFFBEB;

  /* Texto / tokens */
  --tx-default: #1F2937;
  --tx-muted:  #6B7280;
  --tx-dimmed: #9CA3AF;

  --pill-bg: #D97706;  /* âmbar 600 */
  --pill-tx: #FFFFFF;
  --pill-tx-h: #000000;
}

/* ==========================================================================
   LAYOUT PRINCIPAL
   ========================================================================== */
.clipping-container, .main-content, .player-column, .transcription-column { box-sizing: border-box; }

.clipping-container {
  /* Remove a altura fixa (100vh) e o layout flex.
    Isso permite que o container cresça e a PÁGINA role.
  */
  height: auto;
  min-height: 100vh;
  display: block; /* Anula o 'display: flex' do HTML */
}
.main-content {
  display: flex;
  flex: 1;
  overflow: hidden;
}

.player-column {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  padding: 24px;
  margin-left: -22px;
  margin-top: -25px;
  overflow-y: auto;
  min-width: 0;
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.player-column::-webkit-scrollbar { display: none; }

.timeline-box {
  background-color: #ffffff;
  padding: 24px;
  width: 100%;
  border-radius: 8px;
}

.video-player {
  width: 100%;
  aspect-ratio: 16 / 9;
  border-radius: 8px;
  margin-bottom: 20px;
}

.transcription-column {
  /* * ESTA É A NOVA CORREÇÃO:
   * Remove o 'flex: 1' para que a coluna NÃO cresça.
  */
  flex: none; 
  
  /* * Define uma LARGURA FIXA. 
   * O seu CSS original tinha 'max-width: 538px', então vamos usá-lo.
  */
  width: 538px;
  
  /* Remove a margem, pois o 'gap' no .main-content já cuida disso */
  margin-top: 0; 
  
  /* (Da correção anterior) FAZ A COLUNA SER 'STICKY' */
  position: sticky;
  top: 24px; 
  
  /* (Da correção anterior) Define uma altura para a rolagem interna */
  height: 52%;
    background-color: white;
  border-radius: 8px;
  box-shadow: -5px 0px 15px rgba(0, 0, 0, 0.05);
  
}
/* ==========================================================================
   TIMELINE
   ========================================================================== */
.timeline-controls-container {
  width: 100%;
  height: 68px;
  display: flex;
  align-items: center;
  gap: 10px;
}
.timeline-button {
  width: 75px;
  height: 45px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(--button-bg);
  border: 2px solid var(--button-border);
  box-shadow: var(--button-shadow);
  border-radius: 8px;
  color: var(--button-text);
  font-family: 'Inter', sans-serif;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.2s;
}
.timeline-button:hover { background-color: var(--background-color); }

.timeline-wrapper {
  flex: 1;
  min-width: 0;
  display: flex;
  align-items: center;
  user-select: none;
}

/* Container */
.timeline-container {
  position: relative;
  width: 100%;
  height: 48px;
  display: flex;
  align-items: center;
  cursor: pointer;
  background: var(--timeline-background);
  border-radius: 4px;
  z-index: 10;
}

/* Grade divisória (5min) */
.segments-container {
  position: absolute;
  inset: 0;
  display: flex;
  z-index: 1;
  pointer-events: none;
}
.timeline-segment {
  height: 100%;
  background: transparent;
  border-right: 1px solid var(--selection-yellow-burnt);
  box-sizing: border-box;
}
.timeline-segment:first-child {
  border-left: 1px solid var(--selection-yellow-burnt);
}

.handle.handle--black {
  background-color: #000000;
}

.handle.handle--yellow800 {
  background-color: var(--timeline-handle-bg); /* #854D0E (amarelo queimado) */
}

/* Progresso reproduzido (régua) */
.played-range {
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  color: #000000;
  background: #FDE047; /* Preenche com o amarelo claro */
  border-top: 2px solid var(--selection-yellow-burnt);
  border-bottom: 2px solid var(--selection-yellow-burnt);
  border-left: 2px solid var(--selection-yellow-burnt);
  border-right: none;
  border-radius: 4px 0 0 4px; /* Arredonda o canto esquerdo para bater com a timeline */
  box-sizing: border-box; /* Garante que a borda não aumente o tamanho */
  pointer-events: none;
  z-index: 5;
}

/* Seleção de 5 minutos (fundo amarelo) */
.selection-range {
  position: absolute;
  top: 0;
  height: 100%;
  background: var(--selection-yellow);              /* fundo amarelo */
  border: 2px solid var(--selection-yellow-burnt);  /* contorno queimado */
  border-radius: 4px;
  box-sizing: border-box;
  pointer-events: none;
  z-index: 4;
  transition: background-color 0.2s ease, border-color 0.2s ease;
}

/* Quando o vídeo estiver tocando dentro da seleção */
.selection-range.playing {
  background:  var(--selection-yellow);       /* amarelo mais forte */
}

/* Segmento selecionado (pinta bloco inteiro) */
.timeline-segment.is-selected {
  background: var(--selection-yellow);
}

/* Marcadores e Playhead */
.time-marker {
  position: absolute;
  max-width: 100px;
  top: 50%;
  transform: translate(50%, -50%);
  font-family: 'Inter', sans-serif;
  font-weight: 500;
  font-size: 12px;
  color: var(--timeline-marker-text);
  pointer-events: none;
  z-index: 15;
}

.time-marker.time-marker--selected {
  color: gray;
  font-weight: 700;
}

.time-marker.start-marker {
  transform: translate(0px, -50%);
}

.time-marker.end-marker {
  transform: translate(-50px, -50%);
}
.playhead {
  position: absolute;
  width: 1px;
  height: 54px;
  top: 50%;
  transform: translateY(-50%);
  background-color: var(--timeline-playhead-color);
  pointer-events: none;
  z-index: 10;
}
.playhead-tooltip {
  position: absolute;
  left: 50%;
  transform: translateX(-50%) translateY(-8px);
  background: var(--timeline-tooltip-bg);
  color: var(--timeline-tooltip-text);
  font-family: 'Inter', sans-serif;
  font-weight: 500;
  font-size: 12px;
  padding: 2px 8px;
  border-radius: 4px;
  white-space: nowrap;
  margin-top: 68px;
}

/* Handles */
.handle {
  position: absolute;
  width: 8px;
  height: 19px;
  top: 50%;
  background-color: var(--timeline-handle-bg);
  cursor: ew-resize;
  z-index: 20;
  transform: translate(-50%, -50%);
  transition: background-color 0.15s ease;
}
.start-handle { border-radius: 4px 0 0 4px; margin-left: -4px; }
.end-handle   { border-radius: 0 4px 4px 0; margin-left: 5px; }

.handle .handle-tooltip {
  position: absolute;
  bottom: 125%;
  left: 50%;
  transform: translateX(-50%);
  background-color: var(--timeline-tooltip-bg);
  color: #fff;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 500;
  white-space: nowrap;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.2s ease, visibility 0.2s ease;
  pointer-events: none;
}
.handle:hover .handle-tooltip,
.handle.dragging .handle-tooltip {
  opacity: 1;
  visibility: visible;
}

/* ==========================================================================
   TRANSCRIÇÃO
   ========================================================================== */
.transcription-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 24px;
  border-bottom: 1px solid var(--button-border);
  flex-shrink: 0;
}
.search-panel {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 24px;
  border-bottom: 1px solid var(--button-border);
}
.transcription-list {
  flex-grow: 1;
  overflow-y: auto;
  padding: 24px;

}

.transcription-item {
  padding: 12px;
  border-radius: 8px;
  cursor: pointer;
  transition: background-color .2s, color .2s;
  color: var(--tx-default);
  background-color: #F3F4F6;
}
.transcription-item:hover { background: var(--background-color); }
/* Bloco "Passado" (Fundo escuro) */
.transcription-item.played { 
  background: #ffffff; 
}

/* Cor do Timestamp no bloco "Passado" */
.transcription-item.played .timestamp {
  color: #D1D5DB; /* Cinza claro */
}

/* Cor do Texto Principal no bloco "Passado" */
.transcription-item.played .text-content {
  color: #464646; /* Branco/Claro */
}
.transcription-item.playing { background-color:#FEF9C3; }
.transcription-item.selected { background:#FEF9C3; }

.transcription-item .timestamp {
  font-size: 12px;
  font-weight: 600;
  color: #737373; /* <--- ALTERADO */
  margin-bottom: 4px;
  transition: color .2s;
}
.transcription-item.played .timestamp,
.transcription-item.playing .timestamp {
 color: #D1D5DB; /* Cinza claro para legibilidade */}

.text-content {
  color: var(--text-color-default);
  line-height: 1.6;
  transition: color 0.2s;
}
.text-content .tok {
  display: inline;
  padding: 0 .15rem;
  border-radius: .25rem;
  transition: color .15s, background-color .15s;
}
.text-content .tok.is-active { background: var(--pill-bg); color: var(--pill-tx); }
.text-content .tok.is-active:hover { color: var(--pill-tx-h); }

/* ==========================================================================
   RESPONSIVIDADE
   ========================================================================== */
@media (max-width: 1100px) {
  .main-content { flex-direction: column; overflow: auto; }
  .player-column { overflow-y: visible; padding: 16px; }
  .transcription-column {
    flex: none;
    width: 100%;
    max-width: none;
    border-left: none;
    border-top: 1px solid var(--selection-yellow-burnt);
    box-shadow: none;
  }
}
@media (max-width: 500px) {
  .player-column, .transcription-column { padding: 12px; }
  .timeline-controls-container { gap: 8px; }
  .timeline-button { width: 60px; height: 40px; }
}

/* ==========================================================================
   PATCH: neutraliza azuis antigos
   ========================================================================== */
/* ==========================================================================
   PATCH: Define as cores da borda da timeline
   ========================================================================== */

/* Remove as classes de background azul do Tailwind */
.timeline-container .bg-blue-600,
.timeline-container .bg-blue-600\/20 {
  background: transparent !important;
}

/* ESTADO PADRÃO (E QUANDO MOVIDO): Borda Amarela
   Esta classe é aplicada pelo getTimelineBorderClass() */
.timeline-container.timeline-border-yellow .bg-blue-600,
.timeline-container.timeline-border-yellow .bg-blue-600\/20 {
  border: 2px solid var(--selection-yellow-burnt) !important;
}

.timeline-container.timeline-border-yellow .border-blue-800,
.timeline-container.timeline-border-yellow .border-blue-500\/30 {
  border-color: var(--selection-yellow-burnt) !important;
}

/* ESTADO DE EXTREMIDADE: Borda Preta (quando os marcadores estão em 0 e no fim)
   Esta classe é aplicada pelo getTimelineBorderClass() */
.timeline-container.timeline-border-black .bg-blue-600,
.timeline-container.timeline-border-black .bg-blue-600\/20 {
  border: 2px solid #000000 !important;
}

.timeline-container.timeline-border-black .border-blue-800,
.timeline-container.timeline-border-black .border-blue-500\/30 {
  border-color: #000000 !important;
}

.timeline-segment-disabled {
  background-color: #D1D5DB !important; /* Tailwind gray-300 */
  border-color: #D1D5DB !important;       /* Borda da mesma cor do fundo */
}




.timeline-seek-overlay {
  position: absolute;
  inset: 0;
  z-index: 5;
  cursor: pointer;
  pointer-events: none; /* desativado por padrão */
  border-radius: 4px;
}

.timeline-seek-overlay.active {
  pointer-events: auto; /* ativado só quando bloco selecionado */
}
