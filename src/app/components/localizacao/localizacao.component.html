<!-- Wrapper para controlar posicionamento -->
<div *ngIf="isModalOpen" id="modalWrapper" class="veiculosModalContainer">
  <!-- Container do Modal -->
  <div id="veiculosModal" class="w-[490px] h-[573px] bg-white shadow-lg rounded-2xl text-gray-800 relative">

    <!-- Cabeçalho -->
    <div class="flex items-center justify-between bg-white px-4 py-3 h-[73px] rounded-t-2xl">
      <div class="relative w-full">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide stroke-1 text-gray-500 absolute left-3 top-1/2 transform -translate-y-1/2">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21 -4.3-4.3"></path>
        </svg>
        <input 
        type="text" 
        placeholder="Procurar estados" 
        class="w-full bg-white text-gray-900 placeholder-gray-400 focus:outline-none pl-10 py-2 border-none search-input"
        (input)="filtrarEstados($event)" />
      </div>
      <button class="text-xs text-gray-600 flex justify-center items-center w-[30px] h-[18px] border border-gray-300 rounded-lg hover:bg-gray-200"
        (click)="closeModal()">
        ESC
      </button>
    </div>

    <!-- Lista de Estados -->
    <div class="p-4 max-h-[400px] overflow-y-auto">
      <span class="block text-xs font-semibold text-gray-500 text-left">Estados</span> 
      <label class="flex items-center gap-x-2 text-sm font-medium text-gray-700 mt-2">
        <input type="checkbox" [(ngModel)]="selectAll" (change)="toggleAll()" class="rounded text-blue-600 focus:ring-blue-500" />
        Selecionar todos os estados
      </label>
      <div class="grid grid-cols-2 gap-2 mt-2 pr-2">
        <label *ngFor="let estado of estadosFiltrados" class="flex items-center gap-x-2 text-sm font-medium estado-label">
          <input type="checkbox" [(ngModel)]="estado.selecionado" (change)="updateSelectAll()" class="rounded text-blue-600 focus:ring-blue-500" />
          {{ estado.nome }}
        </label>
      </div>
    </div>

    <!-- Rodapé -->
    <div class="absolute bottom-0 left-0 w-[490px] h-[78px] border-t px-6 py-4 flex justify-end items-center">
      <button type="button" class="w-[243px] h-[46px] text-sm font-medium rounded-lg bg-black text-white hover:bg-gray-800">
        Utilizar estados selecionados
      </button>
    </div>

  </div>
</div>

<!-- MODAL MOBILE -->
<div *ngIf="isMobile" class="mobile-modal-container">
  <!-- Barra de busca (fixa no topo) -->
  <div class="mobile-search-container">

    <div class="w-12 h-1.5 bg-gray-400 rounded-full mx-auto mt-2"></div>
<br>
    <div class="mobile-search">
      <i class="icon-search"></i>
      <input type="text" placeholder="Procurar estados" class="mobile-search-input" (input)="filtrarEstados($event)" />
    </div>
  </div>

  <!-- Lista de Estados (rolável) -->
  <div class="mobile-entity-list">
    <div class="mobile-category-section">
      <span class="section-title">Estados</span>
      <div class="mobile-grid-container">
        <label *ngFor="let estado of estadosFiltrados">
          <input type="checkbox" [(ngModel)]="estado.selecionado" (change)="updateSelectAll()" />
          {{ estado.nome }}
        </label>
      </div>
    </div>
  </div>

  <!-- Rodapé fixo -->
  <div class="mobile-modal-footer">
    <button class="mobile-action-button" (click)="closeModal()">Confirmar Seleção</button>
  </div>
</div>

